<template tag-name="lyte-listview1">
	<%if(!ltPropCustomUtils){%>
		<div class="lyteListUtils">
			<%if(ltPropSearch){%>
				<lyte-input lt-prop = {{ltPropInput}} lt-prop-type="search" lt-prop-value = "{{lbind(ltPropSearchValue)}}"></lyte-input>
			<%} if(ltPropColumnChooser){%>
				<div class="lyteListColumnChooser">
					<lyte-button id="columnChooser" onclick="{{action('showPop')}}">
						<template is="registerYield" yield-name="text">
							Choose column
						</template>
					</lyte-button>
				</div>
			<%}%>
		</div>
	<%} if(ltPropColumnChooser){%>
		<lyte-popover lt-prop = {{ltPropPopover}} lt-prop-wrapper-class="lyteListviewManageColumnPopover" lt-prop-header-padding="" lt-prop-content-padding="" lt-prop-origin-elem = "#columnChooser" lt-prop-show = {{lbind(ltPropColumnChooserShow)}}>
			<template is = "registerYield" yield-name = "popover">
				<lyte-popover-header>{{ltPropText.columnChooser}}</lyte-popover-header>
				<lyte-popover-content>
					<lyte-column-chooser lt-prop-header = {{ltPropHeader}} on-checked = "{{method('checked')}}" on-unchecked = "{{method('unchecked')}}"></lyte-column-chooser>
				</lyte-popover-content>
			</template>
		</lyte-popover>
	<%}
	if(ltPropDisplayFilters){%>
		<div class="lyteListFilters" style="{{showConditions}}">
			<%conditions.forIn( function( value, key ){
				if( value.isValid ){%>
					<div class="lyteListFilterItem">
						<span class="lyteListFilterKey">{{key}}:</span>
						<div class="lyteListFilterValueWrap">
							<span class="lyteListFilterValue">{{value.label}}</span>
							<%if(value.input){%>
								<span class="lyteListFilterSelectedValue">{{value.input}}</span>
							<%}else if( value.type == "multiselect" ){%>
								<div class="lyteListFilterMultiSelect">
									<%value.value.forEach( function( item ){%>
										<span class="lyteListMultipleSelected">{{item}}</span>
									<%})%>
								</div>
							<%}%>
							<span class="lyteListRemoveFilter" onclick="{{action('reset_filter', key)}}"></span>
						</div>
					</div>
				<%}
			})%>
		</div>
	<%}%>
	<div class="lyteListviewWrapper">
		<lyte-table lt-prop = "{{stringify(ltPropTable)}}" lt-prop-yield = true lt-prop-content = {{ltPropRenderContent}} lt-prop-header = {{headerData}} lt-prop-data = {{lbind(ltPropData)}} lt-prop-width = {{overallWidth}} on-fix = "{{method('fix')}}" on-un-fix = "{{method('unfix')}}" scroll-end = "{{method('scrollEnd')}}" onclick="{{action('yield_click',event)}}" on-fake-column-create = "{{method('fakeCreate')}}" on-before-select = "{{method('beforeselect')}}" on-select = "{{method('onselect')}}" on-before-drop = "{{method('beforeDrop')}}">
			<template is = "registerYield" yield-name = "yield">
				<%if(ltPropSubHeaders){%>
					<div class="lyteListFakeHeader" style="width:{{overallWidth}}">
						<%fakeHeaderData.forEach( function( item, index ){%>
							<div class="lyteListFakeCell {{if(item.data.pin,'lyteListFixed','')}}" parent_index = {{index}} style = "{{listStyle(item)}}">
								<%if( item.data.name ){
									if(ltPropFakeHeaderYield){%>
										<lyte-yield yield-name = "fakeHeaderYield" cell-data = {{item.data}}></lyte-yield>
									<%}else{%>
										<span>{{item.data.name}}</span>
									<%}
								}
								if(item.resizable){%>
									<div class="lyteListResizeHandler" onmousedown="{{action('resize',event)}}" ontouchstart="{{action('resize',event)}}"></div>
								<%}%>
							</div>
						<%})%>
					</div>
				<%}if(ltPropEdit){%>
					<lyte-edit-element class="lyteListEditElement {{isActive}}" style="{{editStyle}}" tabindex="1" onkeydown="{{action('keydown',event,this)}}" ondblclick="{{action('dblclick')}}" lt-prop-edit-mode = {{lbind(ltPropEditMode)}} lt-prop-edit-yield = {{ltPropEditYield}} lt-prop-cell-data = {{cellData}} lt-prop-row-data = {{rowData}} on-picklist-construct = "{{method('picklistData')}}" on-blur = "{{method('editBlur')}}" lt-prop-format = {{ltPropFormat}} lt-prop-cell-index = {{selectedCell}} lt-prop-row-index = {{originalRow}} onclick = "{{action('edit_elem_click',event)}}">
						<template is = "registerYield" yield-name = "edit" from-parent></template>
						<template is = "registerYield" yield-name = "lyte-custom-edit-yield" from-parent></template>
					</lyte-edit-element>
				<%}%>
				<lyte-table-structure>
					<lyte-thead>
						<lyte-tr>
							<%headerData.forEach( function( cell, index ){%>
								<lyte-th index = {{index}} parent_index = {{cell.parentIndex}} fixed = {{cell.data.pin}} sticky-position = {{cell.data.position}}  style = "{{listStyle(cell.data)}}">
									<span class="lyteListHeaderName {{cell.data.sortStatus}}" onclick="{{action('sort',index)}}">
										<%if(ltPropHeaderYield){%>
											<lyte-yield yield-name = "headerYield" cell-data = {{cell.data}}></lyte-yield>
										<%} else {%>
											<span class="lyteListViewHeaderLabel">{{cell.data.name}}</span>
										<%}%>
									</span>
									<%if(cell.sortStatus){%>
										<span class="lyteListSortReset" onclick="{{action('reset_sort',cell)}}"></span>
									<%}
									if( cell.data.resizable ){%>
										<div class="lyteListResizeHandler" onmousedown="{{action('resize',event)}}" ontouchstart="{{action('resize',event)}}"></div>
									<%}%>
								</lyte-th>
							<%})%>
						</lyte-tr>
					</lyte-thead>
					<lyte-tbody onmousedown = "{{action('mousedown',event)}}" ontouchstart = "{{action('touchstart',event)}}">
						<%ltPropData.forEach( function( item, index ){%>
							<lyte-tr index = {{item.index}} actual_index = {{item.body.rowIndex}} class = "{{isRowSelected(selectedRow,item.index,item.body.data.class)}}" id = {{item.body.id}} onclick = "{{action('row_click', item, this, event)}}">
								<%headerData.forEach( function( cell, index ){%>
									<lyte-td row-index = {{item.index}} index = {{index}}>
										<lyte-yield yield-name = '{{cell.data.yield||"yield"}}' row-data = {{item.body.data}} cell-data = {{cell.data}}></lyte-yield>
									</lyte-td>
								<%})%>
							</lyte-tr>
						<%})%>
					</lyte-tbody>
				</lyte-table-structure>
			</template>
		</lyte-table>
	</div>

	<%if(ltPropFilters && renderFilter){%>
		<lyte-list-filter lt-prop = {{ltPropFilter}} lt-prop-format = {{ltPropFormat}} lt-prop-conditions = {{lbind(conditions)}} lt-prop-any = {{lbind(any)}} lt-prop-show = {{lbind(ltPropShowFilters)}} lt-prop-fields = {{headerData}} lt-prop-content = {{ltPropContent}} on-condition-change = "{{method('filter')}}" on-picklist-construct = "{{method('picklistData')}}" fetch-more-data = "{{method('fetchMoreData')}}" on-custom-filter-reset = "{{method('customReset')}}" on-before-filter-open = "{{method('beforeOpen')}}" on-before-filter-close = "{{method('beforeClose')}}">
			<template is = "registerYield" yield-name = "lyte-custom-filter" from-parent></template>
		</lyte-list-filter>
	<%}%>
</template>